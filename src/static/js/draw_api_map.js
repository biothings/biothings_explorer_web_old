
var nodes_api = new vis.DataSet([{'group': 'api', 'id': 1, 'label': 'http://mygene.info/v3'},
 {'group': 'http://mygene.info/v3', 'id': 2, 'label': 'ensembl.gene'},
 {'group': 'http://mygene.info/v3', 'id': 3, 'label': 'ensembl.protein'},
 {'group': 'api', 'id': 4, 'label': 'http://rest.ensembl.org'},
 {'group': 'http://rest.ensembl.org', 'id': 5, 'label': 'ensembl.gene'},
 {'group': 'http://rest.ensembl.org', 'id': 6, 'label': 'ensembl.protein'},
 {'group': 'api', 'id': 7, 'label': 'https://rest.genenames.org'},
 {'group': 'https://rest.genenames.org', 'id': 8, 'label': 'hgnc.symbol'},
 {'group': 'https://rest.genenames.org', 'id': 9, 'label': 'ccds'},
 {'group': 'http://mygene.info/v3', 'id': 10, 'label': 'unigene'},
 {'group': 'http://mygene.info/v3', 'id': 11, 'label': 'taxonomy'},
 {'group': 'http://mygene.info/v3', 'id': 12, 'label': 'pubmed'},
 {'group': 'http://mygene.info/v3', 'id': 13, 'label': 'ncbigene'},
 {'group': 'http://mygene.info/v3', 'id': 14, 'label': 'uniprot'},
 {'group': 'api', 'id': 15, 'label': 'https://api.monarchinitiative.org/api'},
 {'group': 'https://api.monarchinitiative.org/api', 'id': 16, 'label': 'hgnc'},
 {'group': 'api', 'id': 17, 'label': 'http://mychem.info/v1'},
 {'group': 'http://mychem.info/v1', 'id': 18, 'label': 'drugname'},
 {'group': 'http://mychem.info/v1', 'id': 19, 'label': 'inchikey'},
 {'group': 'http://mychem.info/v1', 'id': 20, 'label': 'iuphar.ligand'},
 {'group': 'http://mygene.info/v3', 'id': 21, 'label': 'wikipathways'},
 {'group': 'http://mygene.info/v3', 'id': 22, 'label': 'hgnc.symbol'},
 {'group': 'api', 'id': 23, 'label': 'http://myvariant.info/v1'},
 {'group': 'http://myvariant.info/v1', 'id': 24, 'label': 'dbsnp'},
 {'group': 'http://myvariant.info/v1', 'id': 25, 'label': 'ensembl.gene'},
 {'group': 'https://api.monarchinitiative.org/api', 'id': 26, 'label': 'do'},
 {'group': 'https://api.monarchinitiative.org/api', 'id': 27, 'label': 'hp'},
 {'group': 'https://api.monarchinitiative.org/api',
  'id': 28,
  'label': 'ncbigene'},
 {'group': 'http://mychem.info/v1', 'id': 29, 'label': 'drugbank'},
 {'group': 'api',
  'id': 30,
  'label': 'https://www.ncbi.nlm.nih.gov/pmc/utils/idconv/'},
 {'group': 'https://www.ncbi.nlm.nih.gov/pmc/utils/idconv/',
  'id': 31,
  'label': 'doi'},
 {'group': 'http://mychem.info/v1', 'id': 32, 'label': 'kegg.compound'},
 {'group': 'http://myvariant.info/v1', 'id': 33, 'label': 'pubmed'},
 {'group': 'http://myvariant.info/v1', 'id': 34, 'label': 'hgvs'},
 {'group': 'api', 'id': 35, 'label': 'http://dgidb.genome.wustl.edu/api/v2'},
 {'group': 'http://dgidb.genome.wustl.edu/api/v2',
  'id': 36,
  'label': 'chembl'},
 {'group': 'http://dgidb.genome.wustl.edu/api/v2',
  'id': 37,
  'label': 'hgnc.symbol'},
 {'group': 'https://www.ncbi.nlm.nih.gov/pmc/utils/idconv/',
  'id': 38,
  'label': 'pubmed'},
 {'group': 'https://www.ncbi.nlm.nih.gov/pmc/utils/idconv/',
  'id': 39,
  'label': 'pmc'},
 {'group': 'https://rest.genenames.org', 'id': 40, 'label': 'mgd'},
 {'group': 'api', 'id': 41, 'label': 'https://api.pharmgkb.org/v1/data'},
 {'group': 'https://api.pharmgkb.org/v1/data',
  'id': 42,
  'label': 'pharmgkb.pathway'},
 {'group': 'https://api.pharmgkb.org/v1/data',
  'id': 43,
  'label': 'pharmgkb disease'},
 {'group': 'http://myvariant.info/v1', 'id': 44, 'label': 'hgnc'},
 {'group': 'https://api.monarchinitiative.org/api',
  'id': 45,
  'label': 'omim disease'},
 {'group': 'http://mygene.info/v3', 'id': 46, 'label': 'ensembl.transcript'},
 {'group': 'https://rest.genenames.org', 'id': 47, 'label': 'hgnc'},
 {'group': 'https://rest.genenames.org', 'id': 48, 'label': 'omim gene'},
 {'group': 'http://dgidb.genome.wustl.edu/api/v2',
  'id': 49,
  'label': 'ncbigene'},
 {'group': 'https://api.monarchinitiative.org/api',
  'id': 50,
  'label': 'orphanet'},
 {'group': 'http://rest.ensembl.org', 'id': 51, 'label': 'ensembl exon'},
 {'group': 'http://mygene.info/v3', 'id': 52, 'label': 'biocarta.pathway'},
 {'group': 'http://myvariant.info/v1', 'id': 53, 'label': 'hgnc.symbol'},
 {'group': 'http://mychem.info/v1', 'id': 54, 'label': 'pubchem substance'},
 {'group': 'http://mygene.info/v3', 'id': 55, 'label': 'kegg.pathway'},
 {'group': 'api',
  'id': 56,
  'label': 'https://pubchem.ncbi.nlm.nih.gov/rest/pug'},
 {'group': 'https://pubchem.ncbi.nlm.nih.gov/rest/pug',
  'id': 57,
  'label': 'ncbigene'},
 {'group': 'https://pubchem.ncbi.nlm.nih.gov/rest/pug',
  'id': 58,
  'label': 'puchem bioassay'},
 {'group': 'https://api.monarchinitiative.org/api', 'id': 59, 'label': 'zfin'},
 {'group': 'http://mychem.info/v1', 'id': 60, 'label': 'kegg.drug'},
 {'group': 'http://mychem.info/v1', 'id': 61, 'label': 'uniprot'},
 {'group': 'http://myvariant.info/v1', 'id': 62, 'label': 'ccds'},
 {'group': 'http://rest.ensembl.org', 'id': 63, 'label': 'hp'},
 {'group': 'api', 'id': 64, 'label': 'http://www.disease-ontology.org/api'},
 {'group': 'http://www.disease-ontology.org/api', 'id': 65, 'label': 'do'},
 {'group': 'http://www.disease-ontology.org/api', 'id': 66, 'label': 'mesh'},
 {'group': 'https://pubchem.ncbi.nlm.nih.gov/rest/pug',
  'id': 67,
  'label': 'hgnc.symbol'},
 {'group': 'http://mygene.info/v3', 'id': 68, 'label': 'go'},
 {'group': 'https://api.pharmgkb.org/v1/data',
  'id': 69,
  'label': 'pharmgkb drug'},
 {'group': 'http://mychem.info/v1', 'id': 70, 'label': 'pubchem.compound'},
 {'group': 'http://mygene.info/v3', 'id': 71, 'label': 'ensembl.translation'},
 {'group': 'https://rest.genenames.org', 'id': 72, 'label': 'ensembl.gene'},
 {'group': 'http://myvariant.info/v1', 'id': 73, 'label': 'clinvar'},
 {'group': 'http://mychem.info/v1', 'id': 74, 'label': 'chembl compound'},
 {'group': 'http://myvariant.info/v1',
  'id': 75,
  'label': 'ensembl.transcript'},
 {'group': 'http://dgidb.genome.wustl.edu/api/v2',
  'id': 76,
  'label': 'drugname'},
 {'group': 'http://mychem.info/v1', 'id': 77, 'label': 'rxnorm'},
 {'group': 'http://myvariant.info/v1', 'id': 78, 'label': 'omim variant'},
 {'group': 'https://api.pharmgkb.org/v1/data',
  'id': 79,
  'label': 'hgnc.symbol'},
 {'group': 'http://myvariant.info/v1', 'id': 80, 'label': 'ensembl.protein'},
 {'group': 'http://mychem.info/v1', 'id': 81, 'label': 'unii'},
 {'group': 'http://mygene.info/v3', 'id': 82, 'label': 'refseq'},
 {'group': 'http://myvariant.info/v1', 'id': 83, 'label': 'orphanet'},
 {'group': 'http://myvariant.info/v1', 'id': 84, 'label': 'uniprot'},
 {'group': 'http://dgidb.genome.wustl.edu/api/v2',
  'id': 85,
  'label': 'chembl compound'},
 {'group': 'https://rest.genenames.org', 'id': 86, 'label': 'ena'},
 {'group': 'http://mychem.info/v1', 'id': 87, 'label': 'pharmgkb drug'},
 {'group': 'https://rest.genenames.org', 'id': 88, 'label': 'uniprot'},
 {'group': 'http://mychem.info/v1', 'id': 89, 'label': 'Disease Name'},
 {'group': 'https://www.ncbi.nlm.nih.gov/pmc/utils/idconv/',
  'id': 90,
  'label': 'go'},
 {'group': 'http://www.disease-ontology.org/api', 'id': 91, 'label': 'nci'},
 {'group': 'http://mychem.info/v1', 'id': 92, 'label': 'chebi'},
 {'group': 'http://mychem.info/v1', 'id': 93, 'label': 'pubmed'},
 {'group': 'http://www.disease-ontology.org/api', 'id': 94, 'label': 'snomed'},
 {'group': 'http://myvariant.info/v1', 'id': 95, 'label': 'efo'},
 {'group': 'http://mychem.info/v1', 'id': 96, 'label': 'snomed'},
 {'group': 'http://myvariant.info/v1',
  'id': 97,
  'label': 'clinicalsignificance'},
 {'group': 'http://mychem.info/v1', 'id': 98, 'label': 'dbsnp'},
 {'group': 'https://api.pharmgkb.org/v1/data',
  'id': 99,
  'label': 'pharmgkb gene'},
 {'group': 'http://mychem.info/v1', 'id': 100, 'label': 'inchi'},
 {'group': 'http://myvariant.info/v1', 'id': 101, 'label': 'drugname'},
 {'group': 'http://myvariant.info/v1', 'id': 102, 'label': 'do'},
 {'group': 'https://rest.genenames.org', 'id': 103, 'label': 'refseq'},
 {'group': 'api', 'id': 104, 'label': 'https://www.ebi.ac.uk/chembl/api/data'},
 {'group': 'https://www.ebi.ac.uk/chembl/api/data',
  'id': 105,
  'label': 'chembl target'},
 {'group': 'https://www.ebi.ac.uk/chembl/api/data',
  'id': 106,
  'label': 'chembl compound'},
 {'group': 'http://mygene.info/v3', 'id': 107, 'label': 'reactome'},
 {'group': 'api',
  'id': 108,
  'label': 'https://eutils.ncbi.nlm.nih.gov/entrez/eutils'},
 {'group': 'https://eutils.ncbi.nlm.nih.gov/entrez/eutils',
  'id': 109,
  'label': 'pubmed'},
 {'group': 'http://mygene.info/v3', 'id': 110, 'label': 'pdb'},
 {'group': 'https://rest.genenames.org', 'id': 111, 'label': 'ncbigene'},
 {'group': 'http://mychem.info/v1', 'id': 112, 'label': 'clinicaltrial'},
 {'group': 'api', 'id': 113, 'label': 'http://hb.flatironinstitute.org/api'},
 {'group': 'http://hb.flatironinstitute.org/api',
  'id': 114,
  'label': 'ncbigene'},
 {'group': 'http://hb.flatironinstitute.org/api',
  'id': 115,
  'label': 'hgnc.symbol'},
 {'group': 'http://myvariant.info/v1', 'id': 116, 'label': 'Disease Name'},
 {'group': 'https://www.ebi.ac.uk/chembl/api/data',
  'id': 117,
  'label': 'uniprot'},
 {'group': 'https://api.monarchinitiative.org/api', 'id': 118, 'label': 'mgi'},
 {'group': 'http://www.disease-ontology.org/api',
  'id': 119,
  'label': 'omim disease'},
 {'group': 'https://www.ebi.ac.uk/chembl/api/data',
  'id': 120,
  'label': 'mesh disease'},
 {'group': 'http://rest.ensembl.org',
  'id': 121,
  'label': 'ensembl.transcript'},
 {'group': 'http://mygene.info/v3', 'id': 122, 'label': 'pharmgkb.pathway'},
 {'group': 'http://www.disease-ontology.org/api', 'id': 123, 'label': 'umls'},
 {'group': 'http://rest.ensembl.org', 'id': 124, 'label': 'taxonomy'},
 {'group': 'https://api.pharmgkb.org/v1/data', 'id': 125, 'label': 'inchi'},
 {'group': 'https://api.pharmgkb.org/v1/data', 'id': 126, 'label': 'drugname'}]);

  // create an array with edges
  var edges_api = new vis.DataSet([{'from': 2, 'label': 'hasInput', 'to': 1},
 {'from': 1, 'label': 'associatedWithProtein', 'to': 3},
 {'from': 5, 'label': 'hasInput', 'to': 4},
 {'from': 4, 'label': 'associatedWithProtein', 'to': 6},
 {'from': 8, 'label': 'hasInput', 'to': 7},
 {'from': 7, 'label': 'hasXref', 'to': 9},
 {'from': 10, 'label': 'hasInput', 'to': 1},
 {'from': 1, 'label': 'associatedWithOrganism', 'to': 11},
 {'from': 12, 'label': 'hasInput', 'to': 1},
 {'from': 1, 'label': 'associatedWithGene', 'to': 13},
 {'from': 14, 'label': 'hasInput', 'to': 1},
 {'from': 16, 'label': 'hasInput', 'to': 15},
 {'from': 18, 'label': 'hasInput', 'to': 17},
 {'from': 17, 'label': 'associatedWithChemical', 'to': 19},
 {'from': 17, 'label': 'hasXref', 'to': 20},
 {'from': 21, 'label': 'hasInput', 'to': 1},
 {'from': 1, 'label': 'hasXref', 'to': 22},
 {'from': 24, 'label': 'hasInput', 'to': 23},
 {'from': 23, 'label': 'associatedWithGene', 'to': 25},
 {'from': 26, 'label': 'hasInput', 'to': 15},
 {'from': 15, 'label': 'associatedWithPhenotype', 'to': 27},
 {'from': 28, 'label': 'hasInput', 'to': 15},
 {'from': 29, 'label': 'hasInput', 'to': 17},
 {'from': 31, 'label': 'hasInput', 'to': 30},
 {'from': 32, 'label': 'hasInput', 'to': 17},
 {'from': 33, 'label': 'hasInput', 'to': 23},
 {'from': 23, 'label': 'associatedWithVariant', 'to': 34},
 {'from': 36, 'label': 'hasInput', 'to': 35},
 {'from': 35, 'label': 'physicallyInteractsWith', 'to': 37},
 {'from': 38, 'label': 'hasInput', 'to': 30},
 {'from': 30, 'label': 'hasXref', 'to': 39},
 {'from': 7, 'label': 'hasXref', 'to': 40},
 {'from': 42, 'label': 'hasInput', 'to': 41},
 {'from': 41, 'label': 'hasComponent', 'to': 43},
 {'from': 23, 'label': 'associatedWithGene', 'to': 44},
 {'from': 45, 'label': 'hasInput', 'to': 15},
 {'from': 46, 'label': 'hasInput', 'to': 1},
 {'from': 47, 'label': 'hasInput', 'to': 7},
 {'from': 7, 'label': 'hasXref', 'to': 48},
 {'from': 35, 'label': 'physicallyInteractsWith', 'to': 49},
 {'from': 50, 'label': 'hasInput', 'to': 15},
 {'from': 4, 'label': 'associatedWithTranscript', 'to': 51},
 {'from': 1, 'label': 'associatedWithPathway', 'to': 52},
 {'from': 23, 'label': 'associatedWithGene', 'to': 53},
 {'from': 17, 'label': 'hasXref', 'to': 54},
 {'from': 55, 'label': 'hasInput', 'to': 1},
 {'from': 57, 'label': 'hasInput', 'to': 56},
 {'from': 56, 'label': 'associatedWithBioassay', 'to': 58},
 {'from': 15, 'label': 'hasHomolog', 'to': 59},
 {'from': 60, 'label': 'hasInput', 'to': 17},
 {'from': 17, 'label': 'carriedBy', 'to': 61},
 {'from': 23, 'label': 'associatedWithGene', 'to': 62},
 {'from': 4, 'label': 'associatedWithPhenotype', 'to': 63},
 {'from': 65, 'label': 'hasInput', 'to': 64},
 {'from': 64, 'label': 'hasXref', 'to': 66},
 {'from': 67, 'label': 'hasInput', 'to': 56},
 {'from': 1, 'label': 'associatedWithOntology', 'to': 68},
 {'from': 41, 'label': 'hasComponent', 'to': 69},
 {'from': 70, 'label': 'hasInput', 'to': 17},
 {'from': 71, 'label': 'hasInput', 'to': 1},
 {'from': 72, 'label': 'hasInput', 'to': 7},
 {'from': 73, 'label': 'hasInput', 'to': 23},
 {'from': 17, 'label': 'hasXref', 'to': 74},
 {'from': 23, 'label': 'associatedWithTranscript', 'to': 75},
 {'from': 35, 'label': 'associatedWithChemical', 'to': 76},
 {'from': 17, 'label': 'hasXref', 'to': 77},
 {'from': 23, 'label': 'hasXref', 'to': 78},
 {'from': 41, 'label': 'hasComponent', 'to': 79},
 {'from': 23, 'label': 'associatedWithProtein', 'to': 80},
 {'from': 81, 'label': 'hasInput', 'to': 17},
 {'from': 82, 'label': 'hasInput', 'to': 1},
 {'from': 23, 'label': 'associatedWithDisease', 'to': 83},
 {'from': 23, 'label': 'associatedWithProtein', 'to': 84},
 {'from': 35, 'label': 'associatedWithChemical', 'to': 85},
 {'from': 7, 'label': 'hasXref', 'to': 86},
 {'from': 17, 'label': 'hasXref', 'to': 87},
 {'from': 7, 'label': 'associatedWithProtein', 'to': 88},
 {'from': 17, 'label': 'associatedWithDisease', 'to': 89},
 {'from': 90, 'label': 'hasInput', 'to': 30},
 {'from': 64, 'label': 'hasXref', 'to': 91},
 {'from': 92, 'label': 'hasInput', 'to': 17},
 {'from': 17, 'label': 'associatedWithPublication', 'to': 93},
 {'from': 64, 'label': 'hasXref', 'to': 94},
 {'from': 95, 'label': 'hasInput', 'to': 23},
 {'from': 96, 'label': 'hasInput', 'to': 17},
 {'from': 23, 'label': 'associatedWithClinicalSignificance', 'to': 97},
 {'from': 17, 'label': 'associatedWithVariant', 'to': 98},
 {'from': 99, 'label': 'hasInput', 'to': 41},
 {'from': 17, 'label': 'hasXref', 'to': 100},
 {'from': 23, 'label': 'associatedWithChemical', 'to': 101},
 {'from': 23, 'label': 'associatedWithDisease', 'to': 102},
 {'from': 7, 'label': 'hasXref', 'to': 103},
 {'from': 105, 'label': 'hasInput', 'to': 104},
 {'from': 104, 'label': 'physicallyInteractsWith', 'to': 106},
 {'from': 1, 'label': 'associatedWithPathway', 'to': 107},
 {'from': 109, 'label': 'hasInput', 'to': 108},
 {'from': 110, 'label': 'hasInput', 'to': 1},
 {'from': 7, 'label': 'hasXref', 'to': 111},
 {'from': 17, 'label': 'associatedWithClinicalTrial', 'to': 112},
 {'from': 114, 'label': 'hasInput', 'to': 113},
 {'from': 113, 'label': 'functionTogetherWith', 'to': 115},
 {'from': 23, 'label': 'associatedWithDisease', 'to': 116},
 {'from': 117, 'label': 'hasInput', 'to': 104},
 {'from': 15, 'label': 'hasHomolog', 'to': 118},
 {'from': 64, 'label': 'hasXref', 'to': 119},
 {'from': 104, 'label': 'hasDrugIndication', 'to': 120},
 {'from': 4, 'label': 'associatedWithTranscript', 'to': 121},
 {'from': 1, 'label': 'associatedWithPathway', 'to': 122},
 {'from': 64, 'label': 'hasXref', 'to': 123},
 {'from': 124, 'label': 'hasInput', 'to': 4},
 {'from': 41, 'label': 'hasXref', 'to': 125},
 {'from': 41, 'label': 'hasXref', 'to': 126},
 {'from': 89, 'to': 116},
 {'from': 9, 'to': 62},
 {'from': 74, 'to': 85},
 {'from': 74, 'to': 106},
 {'from': 85, 'to': 106},
 {'from': 24, 'to': 98},
 {'from': 26, 'to': 65},
 {'from': 26, 'to': 102},
 {'from': 65, 'to': 102},
 {'from': 18, 'to': 76},
 {'from': 18, 'to': 101},
 {'from': 18, 'to': 126},
 {'from': 76, 'to': 101},
 {'from': 76, 'to': 126},
 {'from': 101, 'to': 126},
 {'from': 2, 'to': 5},
 {'from': 2, 'to': 25},
 {'from': 2, 'to': 72},
 {'from': 5, 'to': 25},
 {'from': 5, 'to': 72},
 {'from': 25, 'to': 72},
 {'from': 3, 'to': 6},
 {'from': 3, 'to': 80},
 {'from': 6, 'to': 80},
 {'from': 46, 'to': 75},
 {'from': 46, 'to': 121},
 {'from': 75, 'to': 121},
 {'from': 68, 'to': 90},
 {'from': 16, 'to': 44},
 {'from': 16, 'to': 47},
 {'from': 44, 'to': 47},
 {'from': 8, 'to': 22},
 {'from': 8, 'to': 37},
 {'from': 8, 'to': 53},
 {'from': 8, 'to': 67},
 {'from': 8, 'to': 79},
 {'from': 8, 'to': 115},
 {'from': 22, 'to': 37},
 {'from': 22, 'to': 53},
 {'from': 22, 'to': 67},
 {'from': 22, 'to': 79},
 {'from': 22, 'to': 115},
 {'from': 37, 'to': 53},
 {'from': 37, 'to': 67},
 {'from': 37, 'to': 79},
 {'from': 37, 'to': 115},
 {'from': 53, 'to': 67},
 {'from': 53, 'to': 79},
 {'from': 53, 'to': 115},
 {'from': 67, 'to': 79},
 {'from': 67, 'to': 115},
 {'from': 79, 'to': 115},
 {'from': 27, 'to': 63},
 {'from': 100, 'to': 125},
 {'from': 13, 'to': 28},
 {'from': 13, 'to': 49},
 {'from': 13, 'to': 57},
 {'from': 13, 'to': 111},
 {'from': 13, 'to': 114},
 {'from': 28, 'to': 49},
 {'from': 28, 'to': 57},
 {'from': 28, 'to': 111},
 {'from': 28, 'to': 114},
 {'from': 49, 'to': 57},
 {'from': 49, 'to': 111},
 {'from': 49, 'to': 114},
 {'from': 57, 'to': 111},
 {'from': 57, 'to': 114},
 {'from': 111, 'to': 114},
 {'from': 45, 'to': 119},
 {'from': 50, 'to': 83},
 {'from': 69, 'to': 87},
 {'from': 42, 'to': 122},
 {'from': 12, 'to': 33},
 {'from': 12, 'to': 38},
 {'from': 12, 'to': 93},
 {'from': 12, 'to': 109},
 {'from': 33, 'to': 38},
 {'from': 33, 'to': 93},
 {'from': 33, 'to': 109},
 {'from': 38, 'to': 93},
 {'from': 38, 'to': 109},
 {'from': 93, 'to': 109},
 {'from': 82, 'to': 103},
 {'from': 94, 'to': 96},
 {'from': 11, 'to': 124},
 {'from': 14, 'to': 61},
 {'from': 14, 'to': 84},
 {'from': 14, 'to': 88},
 {'from': 14, 'to': 117},
 {'from': 61, 'to': 84},
 {'from': 61, 'to': 88},
 {'from': 61, 'to': 117},
 {'from': 84, 'to': 88},
 {'from': 84, 'to': 117},
 {'from': 88, 'to': 117}]
);

function fetch_knowledgemap(){
  var promise = $.ajax({
      type:"GET",
      url: "/explorer_beta/api/v2/knowledgemap",
      datatype: "json"
  });
  return promise;
};

function constructAPIMap(){
  fetch_knowledgemap().done(function(jsonResponse) {
    var nodes_dict = {};
    var nodes = [];
    var edges = [];
    var edge_list = [];
    var node_id = 1;
    var api_dict = {};
    jsonResponse['associations'].forEach(function(assoc) {
      if (!(assoc['subject']['prefix'] in nodes_dict)) {
        nodes_dict[assoc['subject']['prefix']] = node_id;
        nodes.push({'group': assoc['api'], 'id': node_id, 'label': assoc['subject']['prefix']});
        node_id += 1;
      };
      if (!(assoc['api'] in api_dict)) {
        api_dict[assoc['api']] = node_id;
        nodes.push({'group': 'api', 'id': node_id, 'label': assoc['api']});
        node_id += 1;
      }
      if (!(assoc['object']['prefix'] in nodes_dict)) {
        nodes_dict[assoc['object']['prefix']] = node_id;
        nodes.push({'group': assoc['api'], 'id': node_id, 'label': assoc['object']['prefix']});
        node_id += 1;
      };
      edge = nodes_dict[assoc['subject']['prefix']] + 'hasInput' + api_dict[assoc['api']];
      if (!(edge_list.includes(edge))) {
        edges.push({'from': nodes_dict[assoc['subject']['prefix']],
                    'to': api_dict[assoc['api']],
                    'label': 'hasInput'});
        edge_list.push(edge);
      };
      edge = api_dict[assoc['api']] + nodes_dict[assoc['object']['prefix']] + assoc['predicate'];
      if (!(edge_list.includes(edge))) {
        edges.push({'from': api_dict[assoc['api']],
                    'to': nodes_dict[assoc['object']['prefix']],
                    'label': assoc['predicate']});
        edge_list.push(edge);
      };
    });
    var container = document.getElementById('api_view');
    var data = {
      nodes: nodes,
      edges: edges
    };
    console.log(data);
    var options = {
      nodes: {
        shape: 'box',
        size: 10,
        font: {
          size:10
        },
        borderWidth:1,
        shadow: true
      },
      edges: {
        width:1,
        shadow: true,
        font: {
          size:5,
          align: 'middle'
        }
      },
      layout:{randomSeed:3}
    };
    var network_api = new vis.Network(container, data, options);
    network_api.fit();
    });
}
function drawApiLevelMap(){
// create an array with nodes


  // create a network
  var container = document.getElementById('api_view');
  var data = {
    nodes: nodes_api,
    edges: edges_api
  };
  var options = {
  	nodes: {
  		shape: 'box',
  		size: 10,
  		font: {
  			size:10
  		},
  		borderWidth:1,
  		shadow: true
  	},
  	edges: {
  		width:1,
  		shadow: true,
      font: {
        size:5,
        align: 'middle'
      }
  	},
  	layout:{randomSeed:3}
  };
  var network_api = new vis.Network(container, data, options);
  network_api.fit();
}

$(document).ready(function(){
  //drawApiLevelMap();
  constructAPIMap();
});


